# 5 Mysql SQL基础

## 5.1 常用数据类型

### 5.1.1 整型

|  类型   | 字节  |      范围(有符号位)       |
| :-----: | :---: | :-----------------------: |
| TINYINT | 1Byte |  0~2^8 OR  -2^7 ~ 2^7-1   |
|   INT   | 4Byte | 0~2^32 OR  -2^31 ~ 2^31-1 |
| BIGINT  | 8Byte | 0~2^64 OR -2^63 ~ 2^63-1  |

- int(M)  M表示总位数
  - 如果某个数不够定义字段时设置的位数，则前面以0补填，zerofill 属性修改
  - 例：int(5)   插入一个数'123'，补填后为'00123'
- 默认存在符号位，unsigned 属性修改
- 在满足要求的情况下，越小越好
- 1表示bool值真，0表示bool值假。MySQL没有布尔类型，通过整型0和1表示。常用tinyint(1)表示布尔型

### 5.1.2 小数

|      类型      |  字节  |   范围(有符号位)    |
| :------------: | :----: | :-----------------: |
| float(单精度)  | 4Byte  | 自定义，表示近似值  |
| double(双精度) | 8Byte  | 自定义，表示近似值  |
|    decimal     | 自定义 | 自定义,表示精确数值 |

- 浮点型既支持符号位 unsigned 属性，也支持显示宽度 zerofill 属性，不同于整型，前后均会补填0
- 支持科学计数法表示。

- 定义浮点型时，需指定总位数和小数位数。

  > float(M, D)     double(M, D)
  >
  > M表示总位数，D表示小数位数
  >
  > M和D的大小会决定浮点数的范围 不同于整型的固定范围
  >
  > M既表示总位数（不包括小数点和正负号），也表示显示宽度（所有显示符号均包括）
  >
  > decimal(M, D)   M也表示总位数，D表示小数位数
  >
  > 保存一个精确的数值，不会发生数据的改变，不同于浮点数的四舍五入
  > 将浮点数转换为字符串来保存，每9位数字保存为4个字节

### 5.1.3 字符

|  类型   | 说明                                                         |
| :-----: | :----------------------------------------------------------- |
|  CHAR   | 定长字符串最多255个字符                                      |
| VARCHAR | 变长字符串最多65535个字符                                    |
|  TEXT   | 变长字符串最多65535个字符类型，在定义时,不需要定义长度<br/>也不会计算总长度不可给default值 |
|  BLOB   | 二进制字符串（字节字符串）                                   |
|  ENUM   | 枚举类型 smallint 存储                                       |
|   SET   | 集合类型 bigint存储                                          |

```
char(11) ：
定长字符串类型,在存储字符串时，最大字符长度11个，立即分配11个字符长度的存储空间，如果存不满，空格填充
varchar(11):
变长的字符串类型看，最大字符长度11个。在存储字符串时，自动判断字符长度，按需分配存储空间。
M表示能存储的最大长度，此长度是字符数，非字节数。
不同的编码，所占用的空间不同。
char,最多255个字符，与编码无关。
varchar,最多65535字符，与编码有关。
一条有效记录最大不能超过65535个字节。
utf8 最大为21844个字符，gbk 最大为32766个字符，latin1 最大为65532个字符
【注】varchar 是变长的，需要利用存储空间保存 varchar 的长度，如果数据小于255个字节，则采用一个字节来保存长度，反之需要两个字节来保存。
varchar 的最大有效长度由最大行大小和使用的字符集确定。

最大有效长度是65532字节，因为在varchar存字符串时，第一个字节是空的，不存在任何数据，然后还需两个字节来存放字符串的长度，所以有效长度是64432-1-2=65532字节。

例：若一个表定义为 CREATE TABLE tb(c1 int, c2 char(30), c3 varchar(N)) charset=utf8; 问N的最大值是多少？
答：(65535-1-2-4-30*3)/3

```

```
枚举类型说明
enum(val1, val2, val3...)
在已知的值中进行单选。最大数量为65535.
枚举值在保存时，以2个字节的整型(smallint)保存。每个枚举值，按保存的位置顺序，从1开始逐一递增。
表现为字符串类型，存储却是整型。
NULL值的索引是NULL。
空字符串错误值的索引值是0
枚举类型，比较适合于将来此列的值是固定范围内的特点，可以使用enum,可以很大程度的优化我们的索引结构
```

   ```mysql
集合类型说明
set(val1, val2, val3...)
create table tab ( gender set('男', '女', '无') );
insert into tab values ('男, 女');
最多可以有64个不同的成员。以bigint存储，共8个字节。采取位运算的形式
当创建表时，SET成员值的尾部空格将自动被删除
   ```



### 5.1.4 时间

|   类型    | 字节  |    说明    |                    范围                    |
| :-------: | :---: | :--------: | :----------------------------------------: |
| datetime  | 8Byte | 日期及时间 | 1000-01-01 00:00:00 到 9999-12-31 23:59:59 |
|   date    | 3Byte |    日期    |          1000-01-01 到 9999-12-31          |
| timestamp | 4Byte |   时间戳   |   19700101000000 到 2038-01-19 03:14:07    |
|   time    | 3Byte |    时间    |          -838:59:59 到 838:59:59           |
|   year    | 1Byte |    年份    |                1901 - 2155                 |



